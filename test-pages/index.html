(var text-val string "")
(var max-chars int 20)

(col
  (pad :l 8 :r 8 :t 8 :b 8
       :bg-col #xaaaaffff
       (text-input 
         :bg-col #xffffffff
         :bind-state-text text-val
         :after-text-bind 
         (fn () void
             (set text-val (trunc text-val max-chars)))
         :w 180
         :h 90
         ))
  (row :w 180 :h 8 :bg-col #xff0000ff
       (empty :w (int (* 180.0 (/ (num (length text-val)) max-chars)))  
              :h 8 :bg-col #x00ff00ff))
  (text "Chars remaining " (- max-chars (length text-val))))
